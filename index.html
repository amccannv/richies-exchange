<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
    <link rel="shortcut icon" href="favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
    <link rel="manifest" href="favicon/site.webmanifest" />
    <title>Richie's Exchange</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Richie's Exchange</h1>
        <div class="game-toggle">
            <button id="rs3Toggle" class="game-btn active">RuneScape 3</button>
            <button id="osrsToggle" class="game-btn">Old School</button>
            <span id="liveIndicator" class="live-indicator" style="display:none">
                <span class="live-dot"></span>LIVE
            </span>
            <button id="refreshBtn" class="refresh-btn" style="display:none" title="Refresh now">↻</button>
        </div>
        <p class="subtitle" id="lastUpdate">Loading prices...</p>
        
        <div class="controls">
            <input type="text" id="search" placeholder="Search items...">
            <select id="currency" style="display:none;">
                <option value="CAD">CAD ($)</option>
                <option value="USD">USD ($)</option>
                <option value="GBP">GBP (£)</option>
                <option value="EUR">EUR (€)</option>
                <option value="AUD">AUD ($)</option>
                <option value="BRL">BRL (R$)</option>
                <option value="DKK">DKK (kr.)</option>
                <option value="SEK">SEK (kr)</option>
            </select>
        </div>
        
        <div class="bond-card" id="bondCard" style="display:none;">
            <div class="bond-card-header">
                <div class="bond-card-title">
                    <img src="" alt="Bond" class="bond-thumb" id="bondThumb" style="display:none;" onerror="this.style.display='none'">
                    <span id="bondCardTitle">Bond</span>
                </div>
                <div class="period-selector" id="bondPeriodSelector">
                    <div class="period-option" data-period="7">7</div>
                    <div class="period-option" data-period="30">30</div>
                    <div class="period-option" data-period="90">90</div>
                    <div class="period-option active" data-period="all">all</div>
                </div>
            </div>
            <div class="bond-card-chart">
                <canvas id="bondMiniChart"></canvas>
            </div>
            <div class="bond-card-stats">
                <div class="bond-stat">
                    <div class="bond-stat-label">GP Price</div>
                    <div class="bond-stat-value" id="bondPriceCard">-</div>
                </div>
                <div class="bond-stat">
                    <div class="bond-stat-label">Local Price</div>
                    <div class="bond-stat-value" id="bondLocalPrice">-</div>
                </div>
                <div class="bond-stat">
                    <div class="bond-stat-label">GP per <span id="bondCurrencySymbol">$</span></div>
                    <div class="bond-stat-value" id="bondGpPerUnit">-</div>
                </div>
                <div class="bond-stat">
                    <div class="bond-stat-label"><span id="bondChangeLabel">All-Time</span> Change</div>
                    <div class="bond-stat-value" id="bondDailyChange">-</div>
                </div>
            </div>
        </div>

        <div id="loading" class="loading">Fetching Grand Exchange prices...</div>
        <div id="error" class="error" style="display:none;"></div>
        <div class="sort-control">
            <div class="currency-control">
                <button id="currencyToggle" class="sort-toggle">
                    <span id="currencyLabel">CAD $</span>
                </button>
                <div id="currencyDropdown" class="sort-dropdown">
                    <div data-currency="CAD">CAD $</div>
                    <div data-currency="USD">USD $</div>
                    <div data-currency="GBP">GBP £</div>
                    <div data-currency="EUR">EUR €</div>
                    <div data-currency="AUD">AUD $</div>
                    <div data-currency="BRL">BRL R$</div>
                    <div data-currency="DKK">DKK kr.</div>
                    <div data-currency="SEK">SEK kr</div>
                </div>
            </div>
            <button id="sortToggle" class="sort-toggle">
                <span id="sortLabel">Volume ↓</span>
            </button>
            <div id="sortDropdown" class="sort-dropdown">
                <div data-sort="volume" data-dir="desc">Volume ↓</div>
                <div data-sort="volume" data-dir="asc">Volume ↑</div>
                <div data-sort="gp" data-dir="desc">Price ↓</div>
                <div data-sort="gp" data-dir="asc">Price ↑</div>
            </div>
        </div>
        <div class="table-wrapper">
            <table id="itemsTable" style="display:none;">
                <thead>
                    <tr>
                        <th>Item Name</th>
                        <th>GP Price</th>
                        <th>Local Currency</th>
                    </tr>
                </thead>
                <tbody id="itemsBody"></tbody>
            </table>
        </div>
        <div class="pagination" id="pagination" style="display:none;">
            <button id="prevPage">&larr; Prev</button>
            <span class="pagination-info" id="pageInfo"></span>
            <button id="nextPage">Next &rarr;</button>
        </div>
    </div>

    <div class="modal-overlay" id="modal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Item Name</div>
                <div class="modal-header-controls">
                    <div class="period-selector" id="periodSelector">
                        <div class="period-option" data-period="7">7</div>
                        <div class="period-option" data-period="30">30</div>
                        <div class="period-option" data-period="90">90</div>
                        <div class="period-option active" data-period="all">all</div>
                    </div>
                    <button class="modal-close" id="modalClose">&times;</button>
                </div>
            </div>
            <div id="modalContent">
                <div class="modal-loading">Loading price history...</div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
